# Cursor → Zed 移行: Geminiとの対話ログ（2026-02-11）

> この会話ログは `articles/cursor-to-zed-migration.md` の元ネタです。

---

## User
ZedだとCLIでClaude Codeを実行しないといけないんじゃないの？現状CursorまたVscodeってことだけど、にClaudeのエクステンションがあるからまだ利点はある

## Gemini
その点に関しては、少し誤解があるかもしれません。そして、その誤解が解けると「なぜ今、自分がCursorを使っているのが勿体ないのか」がより明確になるはずです。

現状の整理と、ZedやVS Codeとの比較を**「Claudeをどう使うか」**という視点で解説します。

### 1. 誤解：ZedはCLIでしかClaudeを使えない？
→ いいえ、Zedは「標準機能（GUI）」としてClaudeが内蔵されています。

「Zedだと黒い画面（ターミナル/CLI）でコマンドを打ってClaudeを動かさないといけない」と思われているかもしれませんが、実は逆です。

- VS Code/Cursor: Claudeを使うために「拡張機能」をインストールする必要がある。
- Zed: 最初からエディタの機能として**「Assistant Panel」**が組み込まれており、APIキーを入れるだけで、エディタの右側でClaudeとチャットしたり、コードを生成させたりできます。

つまり、Zedを使う場合でもCLI（コマンドライン）は不要です。今のCursorで拡張機能を使っているのと同じ（あるいはそれ以上に高速な）GUI体験が、最初から備わっています。

### 2. 今のあなたの構成（Cursor + Claude拡張）の「勿体なさ」
現在、**「Cursorという重い器」を使って、中身は「VS Code用のClaude拡張」**を動かしている状態ですよね。これには以下のデメリットがあります。

- 二重のメモリ消費: Cursorは独自のAI機能（Tab補完やComposer）を動かすためにバックグラウンドでリソースを食っていますが、あなたはそれを使わず、さらにClaude拡張を動かしています。
- 機能の劣化: VS CodeのClaude拡張は便利ですが、Cursorの標準機能（Composer）ほど深くエディタと統合されていません（例：複数ファイルを一気に書き換える、Diffを綺麗に適用するなど）。

### 3. 結局、どれを選ぶのが正解か？（補完関係の整理）

| ツール | Claudeの使い勝手 | 評価 | おすすめな人 |
|:---|:---|:---|:---|
| Cursor | △ (現状) | 拡張機能で使うなら、ただ重いだけ。 | CursorのComposer機能でモデルを「Claude」に設定して使うなら最強。 |
| VS Code | ◯ | Claude拡張を入れるのが標準的。Cursorより軽い。 | 既存の拡張機能を維持しつつ、Claude拡張を使いたい人。 |
| Zed | ◎ | 最速。拡張不要でネイティブ動作。 | 余計な機能はいらない。爆速でテキストを書き、Claudeに相談したい人。 |

### 結論：今の構成に「利点」を残すには？

- **Cursorを活かすなら**: 拡張機能の「Claude」は捨てて、Cursorの設定画面で「Model」をClaude 3.5/3.7に変更してください。そうすれば、Cursorの強力な機能（Cmd+KやComposer）の裏側でClaudeが動くようになり、今の「重いだけ」の状態から「最強の開発環境」に変わります。
- **拡張機能のUIが好きなら**: 素のVS Codeに戻してClaude拡張を入れるのがベストです。動作が軽くなります。

---

## User
なるほど、じゃあ後で、Zedの開発環境をClaude Codeに作らせてみよう

## Gemini
それは面白い実験ですね！**「新しい道具（Zed）の準備を、AI（Claude Code）に丸投げする」**というのは、今の時代ならではの最も賢い使い方かもしれません。

Claude Code（CLI版）はターミナルでコマンドを実行したり、ファイルを編集したりする権限を持っているので、Zedのインストールから設定ファイルの書き込みまで一気にやらせることができます。

### Claude CodeにZed環境を作らせる手順（イメージ）

#### 1. インストールを頼む
「ZedエディタをHomebrew（または適切な方法）でインストールして」
→ `brew install --cask zed` などを実行してくれます。

#### 2. 設定を頼む（ここが肝）
Zedは設定画面（GUI）が少なく、settings.json を直接編集するタイプのエディタです。

「Zedの設定ファイル（settings.json）を開いて、以下の設定を書き込んで。
- Vimモードを有効に（もし使うなら）
- フォントサイズを14に
- テーマを『One Dark』に
- 保存時に自動フォーマットするように
- 一番大事： AIのアシスタント設定で、デフォルトモデルをClaude 3.7 Sonnetに設定して」

---

## User
Vimモードを有効にする意味はあるの？おそらく私は一切コードを書かない

## Gemini
結論から言うと、Vimモードは絶対に有効にしてはいけません。

もし有効にしてしまうと、**「文字が打てない」「保存できない」「ソフトを終了すらできない」**という地獄のような状態になり、パニックになる可能性が高いです。

### なぜ「意味がない」どころか「危険」なのか？
- あなたはコードを書かない — AI（Claude Code）がコードを書くのであれば、人間が高速入力する必要はありません。
- 操作が特殊すぎる — Vimモードでは、`d`を押しても「d」という文字は入力されず、「1行削除」という命令が実行されてしまいます。

### 代わりに頼むべき設定
- × Vimモード: 無効（Disable）
- ◎ フォントサイズ: 少し大きめ（読みやすくするため）
- ◎ 行の折り返し: 有効（横スクロールしなくて済むように）

---

## User
なるほど、じゃあ私がZedでClaude Codeを実行するためのベストプラクティスをClaude Codeに指示するプロンプトを提案して。必要な質問があればしてください

## Gemini
ご自身のスタイル（コードは書かない、Claude Codeにお任せ、重いのは嫌）に特化した、**「司令官専用コックピット」**としてのZed環境を一発で作らせるためのプロンプトを作成しました。

### Claude Codeへの指示プロンプト（Mac想定）

```markdown
私は現在、Cursorを使ってClaude Codeを実行していますが、動作が重いため、より軽量な「Zed」エディタに移行したいと考えています。

あなたは私の「専属環境構築エンジニア」です。以下の要件に従って、Zedのインストールから設定までを完了させてください。

## 1. インストール
- Homebrewを使って、最新のZedエディタをインストールしてください。

## 2. 設定ファイルの最適化（最重要）
私はコードを一切書きません。コードを書くのはあなた（Claude Code）です。
私はあなたが書いたコードを「読む（レビューする）」ことと、ターミナルであなたに指示を出すことがメインです。
そのため、`~/.config/zed/settings.json` を開き、以下の設定を上書きしてください。

**必須設定:**
- `"vim_mode": false`
- `"soft_wrap": "editor_width"`
- `"ui_font_size": 16`
- `"buffer_font_size": 16`
- `"autosave": "on_focus_change"`
- `"terminal": { "font_size": 16 }`
- `"show_whitespaces": "none"`

## 3. 完了後のアクション
- 設定が完了したら、現在のディレクトリをZedで開くコマンド（`zed .`）を実行してください。
```

---

## User
インストールしたけど、これどうすればいいの？

## Gemini
Zedのインストール、無事に完了していますね。画面を見る限り、すでにClaude Codeを使うための準備ができています（右側のパネルがそれです）。

### これからやるべきこと

#### 1. 右側のパネル（Assistant Panel）で指示を出す
右側にある「New Thread」と書かれた広い空白部分の一番下、`Message Claude Code...` とある入力欄を見てください。これが、あなたがClaude Code（AI）に指示を出す場所です。

#### 2. ファイルを開いてみる（左側のツリー）
左側に見えているのがファイル一覧です。気になったファイルをクリックすると、真ん中の広いエリアに中身が表示されます。

#### 3. 「CLI（ターミナル）」を使いたい場合
ショートカット: `Ctrl + `` `

---

## User
Claude Codeのサインインとかまだしてないけど

## Gemini
画面で表示されている状態は、**「まさに正解」**の状態です！ZedのAssistant PanelでClaude Codeというエージェントが既に選択されています。

あとはそのチャット欄からログインコマンドを送るだけで連携が完了します。

### サインインの手順
右下の入力欄（`Message Claude Code...` と書かれているところ）に、`/login` を入力してEnterを押してください。

### 補足：今、何が起きているの？
- これまで（Cursor）: 重いエディタ + 拡張機能
- これから（Zed）: 軽いエディタ + Agent Client Protocol (ACP) という最新技術で接続されたClaude Code

---

## User
ZedでClaudeのパネルを開くにはどうしたらいいのか？

## Gemini
主に以下の3つです。

1. **ショートカットキー（最速）**: `Command + ?`（または `Command + Shift + /`）
2. **コマンドパレットから（確実）**: `Command + Shift + P` → `assistant` と入力 → 「Assistant: Toggle Focus」を選択
3. **アイコンをクリック（マウス派）**: 画面の右下にあるステータスバーの吹き出しアイコン

---

## User
これ使いやすいか？複数のClaude Codeのタブを開いたり、セッションを選んだりはどうやるの？

## Gemini
正直に言うと、Cursorのような「リッチなアプリ感」に慣れていると、ZedのUIは**「シンプルすぎて逆に分かりづらい」**と感じるかもしれません。

### 新しい会話（タブ）を始める方法
- **マウスで**: Assistantパネルの右上にある `+`（プラスマーク）をクリック
- **ショートカットで**: `Cmd + N`

### 過去の会話（セッション）を選ぶ・戻る方法
- Assistantパネルの左上にあるハンバーガーメニュー（≡）をクリック → History（履歴）

### Zedならではの「使いやすさ」の正体
Zedでは**「チャット画面もただのテキストファイル」**として扱われます。
- チャットを真ん中のエディタ画面にドラッグできる
- 複数のチャットを分割して並べられる
- 会話を `Cmd + S` でファイルとして保存できる

---

## User
どこにハンバーガーメニューがあるの？

## Gemini
大変失礼しました、私の情報が古かったようです。現在のZedでは「ハンバーガーメニュー（≡）」は表示されていません。

「New Thread」という文字自体をクリックしてみてください。ドロップダウンメニューになっていることが多いです。

もし反応しない場合: `Cmd + Shift + P` → `history` と入力 → 「Assistant: Open History」を選択。

---

## User
ZedでClaude Codeを実行した時、コンテキストの消費量は表示されるか？

## Gemini
はい、表示されます。ただし控えめな場所にあります。

Assistant Panelの入力欄のすぐ近く（通常は右下またはモデル名の横）に `180k remaining` や `4.2k / 200k` のような小さな文字で表示されます。

---

## User
見当たらないのだが

## Gemini
結論から言うと、現在のZedの仕様では、**Claude Code（ACP接続）のトークン消費量は表示されません。**

### なぜ表示されないのか？

| モード | 役割 | トークン表示 |
|:---|:---|:---|
| 標準モード（API直接） | Zedが直接APIを叩く | **あり** |
| エージェントモード（ACP） | 外部エージェントをZedに埋め込む | **なし** |

### どうすればいいか？（対策）
1. **`/compact`コマンドを使う** — 会話が長くなったら手動で圧縮
2. **警告を待つ** — コンテキスト50%超えで警告が出る
3. **直接聞く** — 「現在のトークン使用状況は？」とチャットで聞く

---

## User
では標準モードを使えばいいのか？

## Gemini
結論から言うと、あなたの使い方の場合、**標準モードを使うのは絶対にNG**です。

| 機能 | エージェントモード | 標準モード |
|:---|:---|:---|
| 役割 | 「実働部隊（社員）」 | 「アドバイザー（相談役）」 |
| コード修正 | 勝手にファイルを書き換えてくれる | コードを提示するだけ（コピペが必要） |
| コマンド実行 | 勝手にテストやインストールを実行する | できない |
| ファイル作成 | 勝手にファイルを作ってくれる | できない |
| トークン表示 | × 表示されない | ◎ 表示される |

標準モードにすると、Claudeは「こう書けば直りますよ」とテキストを表示するだけになります。

---

## User
うーん、Cursorなら見れるから、Cursorの方がいい気がしてきた。ただZedすごいさくさくなんだよなあ

## Gemini
### 衝撃の事実：Cursorでも「Claude Code」のトークンは見えません

- Cursorで「見える」もの: Cursor純正のチャット（Cmd+L）やComposer（Cmd+I）を使ったときのトークン消費量。
- Cursorで「見えない」もの: ターミナルで実行している「Claude Code」のトークン消費量。

つまり、**「安心感のためにCursorに戻っても、結局見えないまま重いだけ」**という結果になります。

### 解決策
1. **聞けばいい** — 「今のコストとトークン使用量を教えて」と聞く
2. **`/cost`コマンドを使う** — セッションの概算コストを表示

---

## User
コンテキストの％表示のことだよ。Cursorならきちんと見れるじゃん

## Gemini
おっしゃる通りです。Cursorのチャットではコンテキスト使用量がバーで可視化されます。ZedのClaude Code連携（Agentモード）はまだそこが「ブラックボックス」です。

### 解決策：Zedの中で「ターミナル版」を動かす

Zedの右側のパネル（Assistant Panel）を使わず、Zedの下部にあるターミナルで `claude` を実行するという手があります。

これなら、**「Zedの爆速エディタ」と「今まで通りの表示（コンテキスト％が見える）」**の両方を手に入れられます。

#### やり方
1. Zedで `Ctrl + `` ` を押して、下部のターミナルを開く
2. そこで `claude` と打ってEnter

これだけです。コンテキストの警告や％表示もバッチリ出ます。

### なぜこれが「最強」なのか？
- **エディタ部分**: Zedなので爆速
- **AI部分**: ターミナル版のClaude Codeなので、慣れ親しんだ表示が全部見える
- **連携**: Claude Codeはターミナルからでもファイルを開いてくれる

---

## User
つまりこうやってCLIで開きさえすれば、Zedの真価が発揮されるということか？つまりCLIメインの使い方であると

## Gemini
その通りです！

**「左に最強の司令塔（Claude CLI）、右に爆速のビューワー（Zed）」**という配置こそが、求めていた環境です。

### なぜこれが「Zedの真価」を引き出すのか

#### 1. 「脳」と「体」の分離が完璧
- 左側（CLI）は「脳」: トークン表示、コスト計算、ツール実行、思考プロセスが100%見える
- 右側（Zed）は「体」: CLIが修正した瞬間、パッと確認できる。世界最速の表示

#### 2. Cursorの「無駄」を完全に排除
Cursorが重いのは、Cursor自体が裏でインデックスを作ったりメモリを食ったりしているから。今の構成では：
- 思考: ターミナルの中のClaude Codeがやる
- エディタ: Zedは余計なことをせず、ただ「結果を表示する」ことに徹する

#### 3. CLIならではの連携技
「修正したファイルをZedで開いて」と指示すれば、右側の画面にファイルがパッと表示されます。

---

## User
なるほど、これならいくつでもターミナルを増やして、並行実装できるわけか？ただ、いちいちcd でルートを移ったりするのが面倒なのだが、これも慣れか？

## Gemini
「並行実装」こそが最強の強みです。しかし、`cd`が面倒というのは解決すべき問題です。

### 1. 「1プロジェクト = 1ウィンドウ」の法則（推奨）
- `Cmd + Shift + N` で新しいZedウィンドウを開く
- 「Open Project」で別のフォルダを選ぶ
- ターミナルを開く（自動的にその場所からスタート）

→ `cd`を打つ必要は一生ありません。

### 2. zoxide（ゾキサイド）を導入する
- 昔: `cd ~/Documents/GitHub/g-kentei-ios`
- 今: `z kentei` （これだけで飛べる）

### 3. エイリアスで `claude` すら打たない
`.zshrc` に `alias c="claude"` を設定すれば、`c` だけで起動。

---

## User
これ毎回Claudeのログインする必要とかはない？

## Gemini
毎回のログインは不要です。

認証情報はPC全体で共通です。ターミナルを100個開こうが、全てのClaude Codeが1つの鍵を共有して動きます。

基本的には数週間〜数ヶ月は持ちますが、ごく稀にセッションが切れることがあります。

---

## User
なんとなくこういうふうにハッカーになってCLIの良さがわかってくるということがわかってきた

## Gemini
その感覚、**まさに「エンジニア（ハッカー）への入り口」**です。

### 「ハッカーのような感覚」の正体

1. **「魔法」の裏側が見える（透明性）** — GUI: 裏で何が起きているか分からない → CLI: 全てが文字で流れる
2. **マウスより速い（スピード）** — 思考と実行のラグがなくなる快感
3. **最先端のハッキング（AI × CLI）** — 「自然言語でコマンドを操る」、さらに一段階上のハッキング

---

## User
ちょっとターミナル独特の文字表記が苦手だから美しくしたい。フォントと等幅なのが気になるから、そこら辺のおすすめを教えて。あとターミナルで等幅を変更すると何か不具合あるかな？

## Gemini
結論から言うと、ターミナルで等幅をやめると**画面が崩壊します**。Claude Codeのようなツールは、文字の幅が揃っていることを前提に表示を組み立てています。

### 等幅のまま美しくするおすすめフォント

| フォント | 特徴 | インストール |
|:---|:---|:---|
| SF Mono | Apple製。洗練、クセなし、日本語相性◎ | Mac標準（不要） |
| JetBrains Mono | 開発者人気No.1。縦長でスタイリッシュ | 要ダウンロード |
| UDEV Gothic | 日本語が圧倒的に美しい。UD書体ベース | 要ダウンロード |

### Zedの設定で「美しく」する

```jsonc
{
  "terminal": {
    "font_family": "SF Mono",
    "font_size": 15,
    "line_height": "loose",  // ★行間を広げて圧迫感を消す
    "dock": "left"
  },
  "theme": "One Dark"
}
```

**`line_height`を広げるのが「脱・黒い画面」のコツ**です。
